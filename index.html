<!DOCTYPE html>
<html lang="en">

  <head>
    
    <!-- Meta Tag -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Portfolio</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="images/icon/coin_icon.ico">
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="images/icon/coin_icon.ico">
    
    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="css/plugin.css">
    
    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
<!--    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?&skin=sons-of-obsidian&lang-cs"></script>-->
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>    

    <!-- Google Web Fonts  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">
    
    
    <!-- HTML5 shiv and Respond.js support IE8 or Older for HTML5 elements and media queries -->
    <!--[if lt IE 9]>
	   <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	   <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    

 </head>

  <body>
    
    
	
	<!-- Preloader Start -->
    <div class="preloader">
	  <p>Loading...</p>
     </div>
     <!-- Preloader End -->

    
    
    <!-- Menu Section Start -->
    <header id="home">
        
        <div class="header-top-area">
            <div class="container">
                <div class="row">
                
                    <div class="col-sm-3">
                        <div class="logo">
                            <a href="index-2.html">Home</a>
                        </div>
                    </div>
                    
                    <div class="col-sm-9">
                        <div class="navigation-menu">
                            <div class="navbar">
                                <div class="navbar-header">
                                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                </div>
                                <div class="navbar-collapse collapse">
                                    <ul class="nav navbar-nav navbar-right">
                                        <li class="active"><a class="smoth-scroll" href="#home">Home <div class="ripple-wrapper"></div></a>
                                        </li>
                                        <li><a class="smoth-scroll" href="#experience">成果物<div class="ripple-wrapper"></div></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
     </header>
     <!-- Menu Section End -->  
    
    
    <!-- Home Section Start -->
    <section class="home-section">
        <div class="container">
            <div class="row">
                
                 <div class="col-sm-offset- col-md-5 col-sm-2 margin-left-setting">
                    <div class="margin-top-150">
                        
                     <div class="table-responsive">
					    <table class="table">
							<tr>
							    <td>名前</td>
								<td><ruby>Arga Prahayasa Anugrah<rt>アルガ　プラハヤサ　アヌグラー</rt></ruby></td>
               </tr>
              <tr>
                  <td>国籍</td>
                  <td>インドネシア</td>
                 </tr>
							
               <tr>
                  <td>日本語力</td>
                  <td>日本語能力試験N1</td>
                </tr>

                <tr>
                <td>出身校</td>
								<td><ruby>東京デザインテクノロジーセンター専門学校<rt>Tech'C</rt></ruby></td>
               </tr>

				      <tr>
								<td>メールアドレス</td>
								<td>arga.prahayasa.a@gmail.com</td>
							</tr>
							<tr>
								<td>Contact</td>
								<td>03-3209-8222 (学校教務)</td>
							</tr>
                            <tr>
								<td>Resume</td>
								<td style="background-color: #f7639a;"><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Check Out My Resume">Resume.pdf</a></td>
							</tr>
						</table>
					  </div>
                     </div>
                   </div>
                 
                 <div class="col-md-5 col-sm-6">
                    <div class="me-image">
<!--                      <img src="images/bg/profile.png" alt="">-->
                  </div>
                </div>
              </div>
            </div>
        </section>
        <!-- Home Section End -->
        
        
        
    <!-- Experience Start -->
    <section class="section-space-padding">
        <div class="container">
           <div class="row">
                <div class="col-sm-12">
                    <div class="section-title">
                        <h2>成果物</h2>
                         <div class="divider dark">
<!--						   <i class="icon-graduation"></i>-->
						  </div>
                        <p></p>
                    </div>
                </div>
            </div>
            
            <div class="row">
            
            <div class="col-sm-12">
				<div class="experience">
				
				<div class="experience-item">
					<div class="experience-circle">
                       <img src="images/icon/box_icon.ico" style="width:50px;height:50px">
                       <p>6月</p>
					</div>
					<div class="experience-content experience-color-blue">
						<h3>倉庫番</h3>
                        <h6>個人制作</h6>
						<p>倉庫番を２Ｄで作成。Unity を使用し、Visual Studio Code を使い windows 上で記述・デバッグ。
						    <div onclick="obj=document.getElementById('menu3').style; obj.display=(obj.display=='none')?'block':'none';">
                            <a style="cursor:pointer;">▼ PlayerScript.cs [ソースコード]</a>
                            </div>
                            <div id="menu3" style="display:none;clear:both;">
                                <div class="rollbox">
                                <pre><code class="prettyprint lang-c">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerScript : MonoBehaviour
{
    private float offset;
    private int playerPosition,levelSize,colNum,rowNum,targetPos,boxTargetPos;
    private GameObject box;
    

    void Start()
    {
        offset = LevelManager.instance.Offset;
        playerPosition = LevelManager.instance.PlayerStartPos;
        levelSize = PlayerPrefs.GetInt("LevelSize",0);
        colNum = PlayerPrefs.GetInt("ColNum",0);
        rowNum = PlayerPrefs.GetInt("RowNum",0);
    }
    void Update()
    {
        KeyPress();
    }
    
    private void KeyPress()
    {
        if(LevelManager.instance.CanMove)
        {
            // try to move player up
            if(Input.GetKeyDown(KeyCode.UpArrow)){
                targetPos = playerPosition - rowNum;
                boxTargetPos = targetPos - rowNum;

                //check if target position is occupied (wall/box)
                if (targetPos > 0 && !LevelManager.instance.IsWall(targetPos))
                {

                    // move box at target position (if posible), then move player up
                    if (LevelManager.instance.Occupied(targetPos) && !LevelManager.instance.Occupied(boxTargetPos) && boxTargetPos > 0 && !LevelManager.instance.IsWall(boxTargetPos))
                    {
                        TryMoveBox(targetPos,0);
                        MovePlayer(0);//up
                    }

                    // if target position is not occupied move player up
                    else if (!LevelManager.instance.Occupied(targetPos))
                    {
                        MovePlayer(0);//up
                    }
                }
            }
            
            // try to move player right
            else if(Input.GetKeyDown(KeyCode.RightArrow)){
                targetPos = playerPosition + 1;
                boxTargetPos = targetPos + 1;

                //check if target position is occupied (wall/box)   
                if (targetPos < levelSize && !LevelManager.instance.IsWall(targetPos))
                {

                    // move box at target position (if posible), then move player right
                    if (LevelManager.instance.Occupied(targetPos) && !LevelManager.instance.Occupied(boxTargetPos) && boxTargetPos < levelSize && !LevelManager.instance.IsWall(boxTargetPos))
                    {
                        TryMoveBox(targetPos,1);
                        MovePlayer(1);//right
                    }

                    // if target position is not occupied move player right
                    else if (!LevelManager.instance.Occupied(targetPos))
                    {
                        MovePlayer(1);//right
                    }
                }
            }

            // try to move player down
            else if(Input.GetKeyDown(KeyCode.DownArrow)){
                targetPos = playerPosition + rowNum;
                boxTargetPos = targetPos + rowNum;

                //check if target position is occupied (wall/box)
                if (targetPos <= levelSize && !LevelManager.instance.IsWall(targetPos))
                {

                    // move box at target position (if posible), then move player down
                    if (LevelManager.instance.Occupied(targetPos) && !LevelManager.instance.Occupied(boxTargetPos) &&  boxTargetPos <= levelSize && !LevelManager.instance.IsWall(boxTargetPos))
                    {

                        TryMoveBox(targetPos,2);
                        MovePlayer(2);//up
                    }

                    // if target position is not occupied move player down
                    else if (!LevelManager.instance.Occupied(targetPos))
                    {
                        MovePlayer(2);//down
                    }
                }
            }
            
            // try to move player left
            else if(Input.GetKeyDown(KeyCode.LeftArrow)){
                targetPos = playerPosition - 1;
                boxTargetPos = targetPos - 1;

                //check if target position is occupied (wall/box)
                if (targetPos > 0 && !LevelManager.instance.IsWall(targetPos))
                {

                    // move box at target position (if posible), then move player left
                    if (LevelManager.instance.Occupied(targetPos) && !LevelManager.instance.Occupied(boxTargetPos) && boxTargetPos > 0 && !LevelManager.instance.IsWall(boxTargetPos))
                    {
                        TryMoveBox(targetPos,3);
                        MovePlayer(3);//left
                    }

                    // if target position is not occupied move player left
                    else if (!LevelManager.instance.Occupied(targetPos))
                    {                   
                        MovePlayer(3);//left
                    }
                }
            }
        }
    }

    //move player according to direction
    private void TryMoveBox(int targetPos, int direction)
    {
        box = LevelManager.instance.ObjectPos[targetPos];
        LevelManager.instance.MoveBox(targetPos,direction,box);
    }


    
    //move player according to direction
    private void MovePlayer(int direction)
    {

        switch(direction){
            case 0:
            playerPosition -= rowNum;
            transform.Translate(0,offset,0);
            break;
            case 1:
            playerPosition += 1;
            transform.Translate(offset,0,0);
            break;
            case 2:
            playerPosition += rowNum;
            transform.Translate(0,-offset,0);
            break;
            case 3:
            playerPosition -= 1;
            transform.Translate(-offset,0,0);
            break;
        }
    }
}
                                </code>
                            </pre>
                            </div>
                            </div>
                            <div onclick="obj=document.getElementById('menu4').style; obj.display=(obj.display=='none')?'block':'none';">
                                <a style="cursor:pointer;">▼ LevelManager.cs [ソースコード]</a>
                                </div>
                                <div id="menu4" style="display:none;clear:both;">
                                    <div class="rollbox">
                                    <pre><code class="prettyprint lang-c">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class LevelManager : SingletonMonoBehaviour<LevelManager>
{
    public GameObject floorPrefab,wallPrefab,boxPrefab,playerPrefab,goalPrefab,gameOverPanel,PlayerObj;
    public Canvas canvas;
    
    [SerializeField]
    List<string> LevelIndex;  // base to create the stage
    [SerializeField]
    List<int> LevelData;    // marking tiles type(wall,floor or goal)
    public List<GameObject> ObjectPos; // keeping object (box)

    // public List<int[]> MemorizeBoxPos;    // keeping box position
    // public List<int> MemorizeBoxPosW;
    public List<int> MemorizePlayerPos;
    public int[,] MemorizeBoxPos;

    public float Offset;
    public int PlayerStartPos;
    public bool CanMove;
    int cols,rows,boxCount,goalCount,goalInCount,undoCount,NoMove;

    void Start()
    {
        CanMove = true;
        gameOverPanel.SetActive(false);
        undoCount = 3;
        ReadLevel();
    }
    
    
    //read stage from text then create level array
    void ReadLevel()
    {
        TextAsset textFile = Resources.Load("level") as TextAsset;
        string[] str = textFile.text.Split(new[] {'\r', '\n'}, System.StringSplitOptions.RemoveEmptyEntries);
        string[] str1 = str[0].Split(';');

        for (int i = 0; i < str.Length; i++)
        {
            str1 = str[i].Split(';');
            for(int j = 0; j < str1.Length; j++)
            {
                LevelIndex.Add (str1 [j]);
                if(str1 [j]=="$"){boxCount++;}
                LevelData.Add (j);
            }
        }

        cols = str.Length;
        rows = str1.Length;
        PlayerPrefs.SetInt("LevelSize",LevelIndex.Count);
        PlayerPrefs.SetInt("ColNum",cols);
        PlayerPrefs.SetInt("RowNum",rows);
        CreateStage();
    }

    //create level from level array
    void CreateStage()
    {
        MemorizeBoxPos = new int[boxCount,undoCount];
        boxCount = 0;
        float x = Offset/2;
		float y = -(Offset/2);
        SpriteRenderer sr;
        for (int i =0; i < LevelIndex.Count; i++)
        {
            if (i > 0 && i % rows == 0) {
				y -= Offset;
				x = Offset/2;
			}

            // create wall
            if (LevelIndex[i] == "#")
            {
                GameObject Wall = (GameObject)Instantiate(wallPrefab);
                Wall.transform.position = centering(x, y);
                Wall.transform.SetParent(canvas.transform);
                ObjectPos.Add(null);
                LevelData[i] = 1;   // mark tile as wall (1)
            }

            // create goal
            else if(LevelIndex[i] == ".")
            {
                goalCount++;
                GameObject Goal = (GameObject)Instantiate(goalPrefab);
                Goal.transform.position = centering(x, y);
                Goal.transform.SetParent(canvas.transform);
                ObjectPos.Add(null);
                LevelData[i] = 2;   // mark tile as goal (2)
            }

            // create floor
            else
            {
                GameObject Floor = (GameObject)Instantiate(floorPrefab);
                Floor.transform.localPosition = centering(x, y);
                Floor.transform.SetParent(canvas.transform);
                ObjectPos.Add(null);
                LevelData[i] = 0;  // mark tile as floor/blank (0)
            }

            // placing player
            if (LevelIndex[i] == "@")
            {
                GameObject Player = (GameObject)Instantiate(playerPrefab);
                Player.transform.localPosition = centering(x, y);
                sr = Player.GetComponent<SpriteRenderer>();
                sr.sortingOrder =1;
                Player.transform.SetParent(canvas.transform);
                PlayerStartPos = i;
                // PlayerPrefs.SetInt("PlayerPos",i);
                ObjectPos.Add(null);
                MemorizePlayerPos.Add(i);
            }
            else if(LevelIndex[i] == "$")
            {
                
                GameObject Box = (GameObject)Instantiate(boxPrefab);
                Box.transform.localPosition = centering(x, y);
                sr = Box.GetComponent<SpriteRenderer>();
                sr.sortingOrder=1;
                Box.transform.SetParent(canvas.transform);
                ObjectPos[i] = Box;
                MemorizeBoxPos[boxCount,0]= i;
                boxCount++;
            }

        x += Offset;
        }

        if (boxCount < goalCount)
        {
            Debug.Log("Level Error");
        }
    }

    //positioning stage in center of the screen
    Vector2 centering(float x, float y)
    {
        return new Vector2(x-(rows*Offset/2),y+(cols*Offset/2));
    }

    //check if tile is wall
    public bool IsWall (int numPos)
    {
        if(LevelData[numPos] == 1)
        {
            return true;
        }
        return false;
    }

    //check if tile is occupied (by box)
    public bool Occupied(int numPos)
    {
        if(ObjectPos[numPos])
        {
            return true;
        }
        return false;
    }

    // check if box is on the goal
    void GoalIn (int pos, int target)
    {
        if(LevelData[target] == 2 && ObjectPos[target])
        {
            goalInCount++;
            if(goalInCount == goalCount)
            {
                StartCoroutine(GameClear());
            }
        }
        else if (LevelData[pos] == 2 && !ObjectPos[pos])
        {
            goalInCount--;
        }
    }

    // game clear window
    IEnumerator GameClear()
    {   
        CanMove = false;
        yield return new WaitForSeconds(1);
        gameOverPanel.SetActive(true);
        ClearData();
    }
    
    void ClearData()
    {
        LevelIndex.Clear();
        LevelData.Clear();
        ObjectPos = null;
    }

    // move the box
    public void MoveBox(int i, int direction, GameObject box)
    {
        
        switch(direction){
            // move box position up
            case 0:
            box.transform.Translate(0,Offset,0);            
            ObjectPos[i-rows]= box;
            ObjectPos[i] = null;
            GoalIn(i, i-rows);
            break;

            // move box position right
            case 1:
            box.transform.Translate(Offset,0,0);
            ObjectPos[i+1]= box;
            ObjectPos[i] = null;
            GoalIn(i, i+1);
            break;

            // move box position down
            case 2:
            box.transform.Translate(0,-Offset,0);
            ObjectPos[i+rows]= box;
            ObjectPos[i] = null;
            GoalIn(i, i+rows);
            break;

            // move box position left
            case 3:
            box.transform.Translate(-Offset,0,0);
            ObjectPos[i-1]= box;
            ObjectPos[i] = null;
            GoalIn(i, i-1);
            break;
        }
    }
}
                              </code>
                            </pre>
                            </div>
                            </div>
                            <li><a href="https://github.com/apa01/sat56/tree/master/SatGame" target="_blank">Link</a></li>
                        </p>
					</div>
				 </div>
				
				<div class="experience-item">
					<div class="experience-circle">
              <img src="images/icon/blue_icon.ico" style="width:50px;height:50px">
                        <p></p>
					</div>
					<div class="experience-content experience-color-blue">
						<h3>Inblocks</h3>
                        <h6>チーム制作　（プログラマー）</h6>
						<p>ブロックを揃えて消せるパズルゲーム</p>
					</div>
				 </div>
				
				<div class="experience-item">
					<div class="experience-circle">
              <img src="images/icon/coin_icon.ico" style="width:50px;height:50px">
                        <p></p>
					</div>
					<div class="experience-content experience-color-blue">
						<h3>CoinStack</h3>
                        <h6>チーム制作　（デザイナー, サブプログラマー）</h6>
						<p>コイン積み上げてパズルゲーム</p>
					</div>
				 </div>
				 
                <div class="experience-item">
					<div class="experience-circle">
              <img src="images/icon/circle_icon.ico" style="width:50px;height:50px">
                        <p></p>
					</div>
					<div class="experience-content experience-color-blue">
						<h3>ReverseMe</h3>
                        <h6>チーム制作　（デザイナー）</h6>
						<p>コイン積み上げてパズルゲーム</p>
					</div>
         </div>
<!--         
         <div class="experience-item">
					<div class="experience-circle">
						<img src="images/icon/dot.png" style="width:50px;height:50px">
                        <p></p>
					</div>
					<div class="experience-content experience-color-blue">
						<h3>DOTPON</h3>
                        <h6>チーム制作　（サブプログラマー）</h6>
						<p>ブロックの世界観でアクションパーティーゲーム</p>
					</div>
				 </div>
-->				
			 </div>
			</div>

            
           </div>
        </div>
    </section>
    <!-- Experience End -->
        
    <!-- Footer Start -->
    <footer class="footer-section">
        <div class="container">
            <div class="row">
               
            <div class="col-md-12">
              <ul class="social-icon margin-bottom-30">
                 <li><a href="https://www.tech.ac.jp/" target="_blank"><img src="images/icon/techc-logo.png" style="width:50px;height:65px"></a></li>
               </ul>
          </div>
<!--             
             <div class="col-md-12 uipasta-credit">
                <p>Design By <a href="http://www.uipasta.com" target="_blank" title="UiPasta">UiPasta</a></p>
                </div>
-->                
             </div>
        </div>
    </footer>
    <!-- Footer End -->
    
    
    <!-- Back to Top Start -->
    <a href="#" class="scroll-to-top"><i class="icon-arrow-up-circle"></i></a>
    <!-- Back to Top End -->
    
    
    <!-- All Javascript Plugins  -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/plugin.js"></script>
    
    <!-- Main Javascript File  -->
    <script type="text/javascript" src="js/scripts.js"></script>
  
  
  </body>
 </html>
